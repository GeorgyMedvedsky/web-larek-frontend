# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Архитектура

![Архитектура_ WEB-ларёк](https://github.com/GeorgyMedvedsky/web-larek-frontend/assets/129301270/32a124f1-cbe7-4e9b-9bd5-912309e802a0)

## Описание данных
Приложение спроектированно по шаблону MVP с index.ts в качестве Presenter

### Базовые компоненты

#### Класс `Modal`
Абстрактный класс, от которого наследуются все компоненты модели данных. 

#### Класс `View`
Абстрактный класс, от которого наследуются все компоненты представления.

#### index.ts (Presenter)
Отвечает за взаимодействие между моделью и представлением.
Получает события от представления и обновляет модель соответственно.
Обновляет представление в ответ на изменения модели.

#### Класс EventEmiter
Позволяет подписываться на события и уведомлять подписчиков о наступлении события.
Класс имеет методы `on`, `off`, `emit` - для подписки на событие, отписки от события и уведомления
подписчиков о наступлении события соответственно.
Дополнительно реализованы методы `onAll` и `offAll` - для подписки на все события и сброса всех
подписчиков.

### Компоненты модели данных

Все компоненты модели данных наследуются от абстрактного класса `Model`

#### Класс `Catalog`
Хранит список товаров и выбранный товар.
Имеет поля:
- `data`,
- `selectedItem` - по умолчанию равен `null`.
Также имеет методы управления этими данными:
- `setData` - принимает аргументом массив товаров и записывает его в поле `data`,
- `getData` - возвращает значение `data`,
- `setSelectedItem` - записывает в поле `selectedItem` выбранный товар,
- `getSelectedItem` - возвращает значение `selectedItem`.

#### Класс `Product`
Представляет товар с его данными, которые хранит в полях:
- `id` - идентификатор товара,
- `description` - описание,
- `image` - изображение,
- `title` - название товара,
- `category` - категория,
- `price` - цена.
Имеет методы:
- `setData` - принимает сам товар в виде объекта и записывает данные о нем в соответствующие поля,
- `getData` - возвращает товар с его данными.

#### Класс `Cart`
Хранит список товаров в корзине и общую сумму в полях:
- `data` - список товаров, добавленных в корзину,
- `totalPrice` - итоговая сумма заказа.
Имеет методы управления этими данными:
- `setData` - устанавливает значение поля `data`,
- `getData` - возвращает значение поля `data`,
- `setTotalPrice` - устанавливает значение для поля `totalPrice`,
- `getTotalPrice` - возвращает значение поля `totalPrice`.
Также имеет методы:
- `removeItem` - удаляет выбранный товар из корзины,
- `addItem` - добавляет выбранный товар в корзину.

#### Класс `Order`
Хранит данные о заказе пользователя:
- `adress` - адрес доставки,
- `email` - электронная почта заказчика,
- `phone` - телефон заказчика,
- `payment` - предпочтительный способ оплаты,
- `price` - сумма заказа,
- `items` - состав заказа.
Метод `setData` позволяет записать данные пользователя в соответствующие поля.

#### Класс `Modal`
Представляет модальное окно с состоянием и содержимым.
- `state` - состояние компонента,
- `content` - содержимое компонента. 
Имеет методы для управления и получения состояния - `setState` и `getState`.
За управление содержимым отвечают методы `setContent` и `getContent`. 

### Компоненты представления

Все компоненты представления наследуются от абстрактного класса View.

#### Класс `CatalogUI`
Отображает список товаров и позволяет выбрать товар.

#### Класс `CardUI`
Отображает информацию о выбранном товаре.

#### Класс `CartUI`
Отображает список товаров в корзине и общую сумму.

#### Класс `FormUI`
Отображает форму для оформления заказа.

#### Класс `Modal`
Отображает модальное окно с указанным содержимым.

### Описание событий
```
enum Events {
    CATALOG_UPDATE = 'catalog:changed' // обновление каталога
    PRODUCT_SELECT = 'catalog:selected' // выбор товара
    PRODUCT_UPDATE = 'product:changed' // обновление товара
    CART_UPDATE = 'cart:changed' // обновление корзины
    ORDER_UPDATE = 'order:changed' // обновление данных заказа

    UI_PRODUCT_SELECT = 'ui:catalog-selected' // выбор товара в каталоге
    UI_PRODUCT_SHOW = 'ui:product-show' // отображение информации о товаре
    UI_CART_SHOW = 'ui:cart-show' // отображение корзины
    UI_FORM_SUBMIT = 'ui:form-submit' // отправка формы
    UI_MODAL_SHOW = 'ui:modal-show' // отображение модального окна
    UI_MODAL_HIDE = 'ui:modal-hide' // скрытие модального окна
}
```
